@{
   
    Layout = null;
}
<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="/Content/css/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/Scripts/jquery.js"></script>
    <title>缓存管理</title>
    <style type="text/css">
        ul li
        {
            display: block;
            margin: 10px;
            margin-bottom: 12px;
        }
        .cacheButton
        {
            border: 1px solid #bfcfda;
            border-radius: 5px;
            -moz-border-radius: 5px; /* Old Firefox */
            color: #5F7392;
            box-shadow: 1px 1px 2px #DBDBDB;
            background: #f2f4f7;
            padding: 3px 8px;
            margin-bottom: 10px;
        }
        .cacheButton span
        {
            color: #0000ff;
        }
    </style>
    <script type="text/javascript">

        $(function () {

            //清理商品详情缓存
            $("#removeCache").click(function () {
                $.ajax({
                    url: '/Test/RemoveCache',
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });

            //清理正品会app缓存
            $("#removeZPHAPPCache").click(function () {
                $.ajax({
                    url: '/Test/RemoveZPHAPPCache',
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });
            //清理商品列表缓存
            $("#removeCommodityListCache").click(function () {
                $.ajax({
                    url: '/Test/RemoveCommodityListCache',
                    data: { appId: $.trim($("#appIdCommodityList").val()) },
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });

            //清理商品分类缓存
            $("#removeCategoryCache").click(function () {
                $.ajax({
                    url: '/Test/RemoveCategoryCache',
                    data: { appId: $.trim($("#appIdCategory").val()) },
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });
            //清理商品活动缓存
            $("#removeCommodityPromotionCache").click(function () {
                $.ajax({
                    url: '/Test/RemoveCommodityPromotionCache',
                    data: { appId: $.trim($("#appIdCommodityPromotion").val()) },
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });

            //
            //清理行为记录url缓存
            $("#removeBehaviorRecordUrl").click(function () {
                $.ajax({
                    url: '/Test/RemoveBehaviorRecordUrlCache',
                    data: {},
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });

            //删除折扣商品
            $("#removePromotionOutside").click(function () {
                $.ajax({
                    url: "/Test/RemovePromotionByOutsideId",
                    data: { outSideId: $.trim($("#outSideIdCommodityPromotion").val()) },
                    type: "post",
                    dataType: "json",
                    success: function (data) {
                        if (data.Result == 1) {
                            alert("删除折扣商品成功")
                        }
                        else {
                            alert(data.Message);
                        }
                        return false;
                    },
                    error: function (data, text) {
                        alert("操作失败");
                    }
                })
            });
            $("#updateCrcAppId").click(function () {
                $.ajax({
                    url: '/Test/updateCrcAppId',
                    type: 'post',
                    beforeSend: function () {
                        //ajaxLoading(1, '');
                    },
                    complete: function () {
                        //ajaxLoading(1, '');
                    },
                    success: function (data) {
                        alert(data.Messages);
                    },
                    error: function (date, text) {
                        alert("操作失败");
                    }
                });
            });
        })

        function searchAppName() {
            $.ajax({
                url: "/Test/GetAppName",
                data: { appId: $.trim($("#appId").val()) },
                type: "post",
                dataType: "json",
                success: function (data) {
                    alert(data.Messages);
                },
                error: function (data, text) {
                    alert("操作失败");
                }
            });
        }

        function data(appid) {
            $.ajax({
                url: "/Test/UpdateData",
                type: "post",
               success: function (data) {
                    alert(data.Messages);
                },
                error: function (data, text) {
                    alert("操作失败");
                }
            });
        }

        function skindata(appid) {
            $.ajax({
                url: "/Test/UpdateSkinData",
                data: { appId: $.trim($("#appIdSkin").val()) },
                type: "post",
                success: function (data) {
                    alert(data.Messages);
                },
                error: function (data, text) {
                    alert("操作失败");
                }
            });
        }
    </script>
</head>
<body>
    <div class="con">
        <p style="margin-bottom: 5px;">
            清理缓存</p>
        <div>
            <ul>
                <li><a href="javascript:;" class="cacheButton" id="removeCache">清理商品缓存</a>G_CommodityDetail
                </li>
                <li><a href="javascript:;" class="cacheButton" id="removeZPHAPPCache">清理正品会APP缓存</a>G_AppInZPH
                </li>
                <li>appid：<input type="text" value="" style="width: 300px; border: 1px #ccc solid;"
                                 id="appIdCommodityList" />按输入的app清理商品列表缓存；不填则清所有的<br />
                    <a href="javascript:;" class="cacheButton" id="removeCommodityListCache" style="display: inline-block;
                                                                                                                                                                                                          margin-top: 2px">清理商品列表缓存</a>G_CommodityList(:) </li>
                <li>appid：<input type="text" value="" style="width: 300px; border: 1px #ccc solid;"
                                 id="appIdCategory" />按输入的app清理商品分类缓存；不填则清所有的<br />
                    <a href="javascript:;" class="cacheButton" id="removeCategoryCache" style="display: inline-block;
                                                                                                                                                                               margin-top: 2px">清理商品分类缓存</a>G_CategoryInfo</li>
                <li>appid：<input type="text" value="" style="width: 300px; border: 1px #ccc solid;"
                                 id="appIdCommodityPromotion" />按输入的app清理商品活动缓存；不填则清所有的<br />
                    <a href="javascript:;" class="cacheButton" id="removeCommodityPromotionCache" style="display: inline-block;
                                                                                                                                                                                         margin-top: 2px">清理商品活动缓存</a>G_CommodityPromotion(:)</li>
                <li><a href="javascript:void(0);" class="cacheButton" id="removeBehaviorRecordUrl"
                       style="display: inline-block; margin-top: 2px">清理行为记录url缓存</a> </li>
                <li>outSideId：<input type="text" value="" style="width: 300px; border: 1px #ccc solid;"
                                     id="outSideIdCommodityPromotion" />按输入的外部活动Id删除折扣商品及缓存，不填则不删除<br />
                    <a href="javascript:;" class="cacheButton" id="removePromotionOutside" style="display: inline-block;
                        margin-top: 2px">删除折扣商品及缓存</a></li>
                <li>
                    <div style=" padding:20px;"></div>
                    CommodityCategory表数据更新CrcAppId： <a href="javascript:;" class="cacheButton" id="updateCrcAppId" style="display: inline-block;
                        margin-top: 2px">CommodityCategory表数据更新CrcAppId</a></li>
            </ul>
        </div>
        <div>
            <input type="text" style="width:250px;" id="appId" /><input type="button" value="根据appId查询app名称" onclick="searchAppName()"/>
        </div>
        <div>
            <input type="button" value="处理表ShoppingCartItems数据" style="width: 300px;height: 26px;" onclick="data()"/>
        </div>
        <div>
            appid：<input type="text" value="" style="width: 300px; border: 1px #ccc solid;"
                                 id="appIdSkin" />appid皮肤<br />
            <input type="button" value="皮肤接口" style="width: 300px;height: 26px;" onclick="skindata()"/>
        </div>
    </div>
    <div>
        <p id="result">
        </p>
    </div>
</body>
</html>
